<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation | Chemotion</title>
    <meta name="generator" content="VuePress 1.8.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/chemotion-docs/assets/css/0.styles.4aa129c6.css" as="style"><link rel="preload" href="/chemotion-docs/assets/js/app.4c891835.js" as="script"><link rel="preload" href="/chemotion-docs/assets/js/2.f13eb850.js" as="script"><link rel="preload" href="/chemotion-docs/assets/js/8.37da147c.js" as="script"><link rel="prefetch" href="/chemotion-docs/assets/js/3.9f41a7be.js"><link rel="prefetch" href="/chemotion-docs/assets/js/4.3f648480.js"><link rel="prefetch" href="/chemotion-docs/assets/js/5.abd65e2b.js"><link rel="prefetch" href="/chemotion-docs/assets/js/6.36d4639b.js"><link rel="prefetch" href="/chemotion-docs/assets/js/7.8436c0b9.js">
    <link rel="stylesheet" href="/chemotion-docs/assets/css/0.styles.4aa129c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/chemotion-docs/" class="home-link router-link-active"><!----> <span class="site-name">Chemotion</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/chemotion-docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://www.chemotion.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chemotion
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/chemotion-docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://www.chemotion.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chemotion
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/chemotion-docs/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/chemotion-docs/installation.html" aria-current="page" class="active sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chemotion-docs/installation.html#architecture-overview" class="sidebar-link">Architecture Overview</a></li><li class="sidebar-sub-header"><a href="/chemotion-docs/installation.html#requirements" class="sidebar-link">Requirements</a></li><li class="sidebar-sub-header"><a href="/chemotion-docs/installation.html#installation-using-docker" class="sidebar-link">Installation using Docker</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h1> <p></p><div class="table-of-contents"><ul><li><a href="#architecture-overview">Architecture Overview</a></li><li><a href="#requirements">Requirements</a></li><li><a href="#installation-using-docker">Installation using Docker</a><ul><li><a href="#setting-up-a-reverse-proxy">Setting up a Reverse-Proxy</a></li></ul></li></ul></div><p></p> <h2 id="architecture-overview"><a href="#architecture-overview" class="header-anchor">#</a> Architecture Overview</h2> <h2 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h2> <h2 id="installation-using-docker"><a href="#installation-using-docker" class="header-anchor">#</a> Installation using Docker</h2> <p>To setup the Chemotion ELN using Docker, Docker and Docker-compose have to be installed on the host machine. Please refer to your distributions documentation on how this can be achieved. For Ubuntu-based machines, this can be found <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>In addition you need that latest version of our Docker build files. They can be found here:</p> <ul><li><a href="data/Dockerfile">Dockerfile</a></li> <li><a href="data/docker-compose.yml">docker-compose.yml</a></li></ul> <p>Download those files and place them in a separate folder (further referred to as <code>CES_DOCKER_PATH</code> as it should contain all the files to build and run the container).</p> <p>In a next step checkout the Chemotion ELN main repository and change to the latest branch:</p> <div class="language- extra-class"><pre class="language-text"><code>git clone https://git.scc.kit.edu/ComPlat/chemotion_eln_server.git
cd chemotion_eln_server
git checkout development
</code></pre></div><p>In this documentation we refer to the folder containing the source files as <code>CES_HOST_PATH</code>. These paths are used by the Docker files and thus they need to exported to the shell as environment variables:</p> <div class="language- extra-class"><pre class="language-text"><code>export CES_HOST_PATH=/{change this}/chemotion_eln_server
export CES_DOCKER_PATH=/{change this}/chemotion-docker
</code></pre></div><p>Now, we can start the build process for the container:</p> <div class="language- extra-class"><pre class="language-text"><code>cd $CES_DOCKER_PATH
echo &quot;CES_HOST_PATH=${CES_HOST_PATH}\nCES_DOCKER_PATH=${CES_DOCKER_PATH}&quot; &gt; .env

docker-compose build --no-cache
</code></pre></div><p>After the container has been built, the ELN service has to be configured using it's configuration files. The configuration files are all present in <code>CES_HOST_PATH</code> with a <code>.example</code> extension. Please make sure to edit them according to your needs and save them without the <code>.example</code> extension. Most configuration files should be self-explanatory but further explanation can be found on the <a href="https://git.scc.kit.edu/ComPlat/chemotion_ELN/-/blob/development/INSTALL.md" target="_blank" rel="noopener noreferrer">Chemotion ELN repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>If you just want to use the example configuration, you can copy the example files:</p> <div class="language- extra-class"><pre class="language-text"><code>cp ${CES_HOST_PATH}/config/datacollectors.yml.example ${CES_HOST_PATH}/config/datacollectors.yml
cp ${CES_HOST_PATH}/config/storage.yml.example ${CES_HOST_PATH}/config/storage.yml
</code></pre></div><p>With the application being configured, <code>docker-compose</code> can be used to initialize the database:</p> <div class="language- extra-class"><pre class="language-text"><code>docker-compose run app bundle exec rake db:create
docker-compose run app bundle exec rake db:migrate
docker-compose run app bundle exec rake db:seed
</code></pre></div><p>Here, the last line is optional but highly recommended, since it does create a demo user <code>template.moderator@eln.edu</code> with the password <code>@eln.edu</code>.</p> <p>The next step is to install dependencies that are needed by the application and are not present in the container:</p> <div class="language- extra-class"><pre class="language-text"><code>docker-compose run app /bin/bash -c '/usr/local/nvm/versions/node/v12.18.3/bin/npm i'

docker-compose run app /bin/bash -c 'source /usr/local/nvm/nvm.sh;\
 cd node_modules/@novnc/noVNC;\
 npx babel-upgrade --write; npm i; npm i pako; npm i @babel/preset-env;\
 mkdir -p utils;\
 curl https://raw.githubusercontent.com/novnc/noVNC/master/utils/use_require.js &gt; utils/use_require.js;\
 node utils/use_require.js --clean; true'
</code></pre></div><p>After this, the next commands precreate static assets. This is also a good test to make sure everything went as expected:</p> <div class="language- extra-class"><pre class="language-text"><code>docker-compose run app rake ketcherails:import:common_templates
docker-compose run app bundle exec rake assets:precompile
</code></pre></div><p>With the last command exiting with error code 0, the service should be setup correctly and is ready to be used. This can be done by starting the services with <code>docker-compose</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>cd ${CES_DOCKER_PATH}
docker-compose up -d
</code></pre></div><p>The services are now up and running and will be available on <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">localhost:3000<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
To simplify this installation process, the steps are all gathered in a single shell script that can be found <a href="https://ptrxyz.github.io/chemotion-docs/data/install.sh" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Feel free to use this, yet this does not consider any user specific configuration and is thus not meant to be used in a production environment. Further, the script does not check if any files in the target folders <code>$(pwd)/chemotion_eln_server</code> and <code>$(pwd)/chemotion-docker</code> exist. Files might be overwritten, so handle with care!</p> <h3 id="setting-up-a-reverse-proxy"><a href="#setting-up-a-reverse-proxy" class="header-anchor">#</a> Setting up a Reverse-Proxy</h3> <div class="language- extra-class"><pre class="language-text"><code>Todo: NGinx as Revers-Proxy goes here. Mb LE certificates for SSL?
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/chemotion-docs/" class="prev router-link-active">
        Home
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/chemotion-docs/assets/js/app.4c891835.js" defer></script><script src="/chemotion-docs/assets/js/2.f13eb850.js" defer></script><script src="/chemotion-docs/assets/js/8.37da147c.js" defer></script>
  </body>
</html>
